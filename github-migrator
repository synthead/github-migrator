#!/usr/bin/env ruby

require 'bundler/setup'
Bundler.require(:default)

require_relative 'lib/issue_handlers/bitbucket'
require_relative 'lib/issue_handlers/github'

config_dir = File.join(__dir__, 'config')
github_config = YAML.load_file(File.join(config_dir, 'github.yml'))
bitbucket_config = YAML.load_file(File.join(config_dir, 'bitbucket.yml'))

github = IssueHandlers::Github.new(github_config)
bitbucket = IssueHandlers::Bitbucket.new(bitbucket_config)

bitbucket.read_all_as_github.each { |i| github.create(i) }
