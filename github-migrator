#!/usr/bin/env ruby

require 'bundler/setup'
Bundler.require(:default)

require_all File.join(__dir__, 'lib')

config_dir = File.join(__dir__, 'config')
config_data = ConfigData.new(config_dir, ['github', 'bitbucket'])

github = IssueHandlers::Github.new(config_data.config['github'])
bitbucket = IssueHandlers::Bitbucket.new(config_data.config['bitbucket'])

bitbucket.read_all.each { |i| github.create(i) }
